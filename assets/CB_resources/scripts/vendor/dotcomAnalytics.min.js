"use strict";var DotComAnalytics=function(){function t(t,e,i){this.pageInfo=t,this.config=e,this._window=i,this.version="0.6.1",this.pageInfo=this.pageInfo||{},this.isInvoked=!1,this.config=this.config||{},this.config.immediatelyInvoke=this.config.immediatelyInvoke||!1,this.config.enableLocation=this.config.enableLocation||!1,this.config.includes=this.config.includes||[],this.trackableElements=[];i=this.getUrlDefault(i);this.property("cbcountry",this.pageInfo.cbcountry||"us"),this.property("cblanguage",this.pageInfo.cblanguage||"eng"),this.property("cbtype",this.pageInfo.cbtype||"consumer"),this.property("cbwebidentifier",this.pageInfo.cbwebidentifier||"marketing"),this.property("cbbrand",this.pageInfo.cbbrand||"cb"),this.property("cbpgName",this.pageInfo.cbpgName||"view"),this.property("cbaction",this.pageInfo.cbaction||"view"),this.property("cbsitename",this.pageInfo.cbsitename||i);this.property("cbpgFunction",this.pageInfo.cbpgFunction||""),this.property("cbpgSubFunction",this.pageInfo.cbpgSubFunction||""),this.property("cbpgsubType",this.pageInfo.cbpgsubType||""),this.property("cbproductType",this.pageInfo.cbproductType||""),this.geolocation(this.pageInfo.cbgeoLocation),this.deviceType(this.pageInfo.cbdevice),this.config.immediatelyInvoke&&this.init(this.config.includes),this.timeLoaded=this.getTime()}return t.prototype.init=function(t){return this.timeInitialized=this.getTime(),"undefined"!=typeof window&&(window.CBDL=window.CBDL||{},window.CBDL.pgInfo=this.pageInfo||window.CBDL.pgInfo),this.track(),this.bind(),this.isInvoked=!0,this.timeReady=this.getTime(),!0},t.prototype.bind=function(){return"undefined"!=typeof window&&window.addEventListener("resize",this.deviceType,!0),!0},t.prototype.getTime=function(){return(new Date).getTime()},t.prototype.property=function(t,e){return void 0!==t&&(void 0!==e?(this.pageInfo[t]=e,this.timeLastPropertyChange=this.getTime(),this.pageInfo[t]):this.pageInfo[t]||"")},t.prototype.deviceType=function(t){var e="desk";return t||("undefined"==typeof window||void 0===window.screen?e:(window.screen.width<768?e="mobi":768<=window.screen.width&&window.screen.width<=1024&&(e="tablet"),this.pageInfo.cbdevice=e))},t.prototype.geolocation=function(t){function e(){return i.pageInfo.cbgeoLocation="",!1}var i=this;return this.config.enableLocation?t||("undefined"!=typeof window&&window.navigator&&window.navigator.geolocation&&window.navigator.geolocation.getCurrentPosition(function(t){return i.pageInfo.cbgeoLocation=t.coords.latitude+","+t.coords.longitude,!0},e),!0):(e(),!1)},t.prototype.track=function(t){var e,i=this,n=[];0<this.trackableElements.length?(n=(e="undefined"!=typeof document&&document.querySelectorAll(t))&&0<e.length?Array.prototype.slice.call(e):[],this.trackableElements=this.trackableElements.concat(n).filter(function(t,e,i){return e===i.indexOf(t)})):(n=(e="undefined"!=typeof document&&document.querySelectorAll(t||'a, button, input[type="button"], input[type="submit"]'))&&0<e.length?Array.prototype.slice.call(e):[],this.trackableElements=n),this.trackableElements.forEach(this.setupTrackableElement);var o=this.trackableElements.map(function(t){if(t)return t.dataset.cbdataReason});return this.trackableElements.forEach(function(t){return i.trackableElementsAdditionalInfo(t,o)}),this.trackableElements},t.prototype.setupTrackableElement=function(t){var e,i="cbdataType",n="cbdataReason",o="cbensightenevent",a=(e=t)&&"A"===e.tagName?"link":"button",s=function(t){t&&$(t);for(var e="section, footer, header",i=$(t).closest(e)&&$(t).closest(e).get(0),n=(i=i||$(t).closest("div")&&$(t).closest("div").get(0)).classList[0]||i.tagName.toLowerCase(),e=t.getAttribute("title")||t.innerText||t.textContent||t.getAttribute("value"),o=t.getAttribute("aria-label")||(null===(i=null===(i=$(t).find("img"))||void 0===i?void 0:i.get(0))||void 0===i?void 0:i.getAttribute("alt"))||(null===(o=null===(o=$(t).find("svg"))||void 0===o?void 0:o.get(0))||void 0===o?void 0:o.getAttribute("aria-label")),a="",s=0,r=[n,e&&e.replace(/\n|\®|\™/g,"").replace(/\s/g,"-").toLowerCase(),{"Citizens Home Page":"logo","Citizens Home Page.":"logo"}[o]];s<r.length;s++){var c=r[s];c&&(a=a.concat("--".concat(c)))}return a.slice(2)}(t);t.classList.contains(o)||t.classList.add(o),t.dataset[i]=t.dataset[i]||a,t.dataset[n]=t.dataset[n]||s},t.prototype.trackableElementsAdditionalInfo=function(t,i){var e="cbdataReason",n=t.dataset[e],o=i.filter(function(t,e){return i.indexOf(t)!==e});!(i=Array.from(new Set(o))).includes(n)||(o=null===(o=this.findClosest($(t),"h1, h2, h3, h4, h5").get(0))||void 0===o?void 0:o.innerText)&&(n=n.concat("--".concat(o.replace(/\n|\®|\™/g,"").replace(/\s/g,"-").toLowerCase())),t.dataset[e]=n)},t.prototype.getUrlDefault=function(t){return(t=t||window).location.href.includes("secure")?"national":""},t.prototype.findClosest=function(t,n){var e,i=$(),o=t.find(n),a=0;return o.length&&(i=i.add(o),a+=o.length),a==t.length?i:((o=t.siblings(n)).length&&(i=i.add(o),a+=o.length),i=a<t.length&&(e=function t(e){var i=e.find(n);{if(i.length)return i;t(e.parent())}}(t.parent().parent()))?i.add(e):i)},t}();"undefined"!=typeof module&&void 0!==module.exports?module.exports=DotComAnalytics:window&&window.DotComAnalytics&&(window.DotComAnalytics=DotComAnalytics);